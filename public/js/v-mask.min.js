!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).VueMask={})}(this,(function(e){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?n(Object(o),!0).forEach((function(r){t(e,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))}))}return e}var i=[];function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";if(!u(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(r))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\n"+"The placeholder character that was received is: ".concat(JSON.stringify(r),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(e)));return e.map((function(e){return e instanceof RegExp?r:e})).join("")}function u(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}function c(e){for(var r,t=[];-1!==(r=e.indexOf("[]"));)t.push(r),e.splice(r,1);return{maskWithoutCaretTraps:e,indexes:t}}var f=[];function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!u(t)){if("function"!==r(t))throw new Error("Text-mask:conformToMask; The mask property must be an array.");t=c(t=t(e,n)).maskWithoutCaretTraps}var o=n.guide,i=void 0===o||o,l=n.previousConformedValue,s=void 0===l?"":l,p=n.placeholderChar,v=void 0===p?"_":p,d=n.placeholder,h=void 0===d?a(t,v):d,y=n.currentCaretPosition,g=n.keepCharPositions,m=!1===i&&void 0!==s,b=e.length,O=s.length,k=h.length,w=t.length,x=b-O,j=x>0,E=y+(j?-x:0),P=E+Math.abs(x);if(!0===g&&!j){for(var A="",T=E;T<P;T++)h[T]===v&&(A+=v);e=e.slice(0,E)+A+e.slice(E,b)}for(var V=e.split("").map((function(e,r){return{char:e,isNew:r>=E&&r<P}})),M=b-1;M>=0;M--){var S=V[M].char;if(S!==v){var C=M>=E&&O===w;S===h[C?M-x:M]&&V.splice(M,1)}}var R="",_=!1;e:for(var N=0;N<k;N++){var D=h[N];if(D===v){if(V.length>0)for(;V.length>0;){var U=V.shift(),L=U.char,z=U.isNew;if(L===v&&!0!==m){R+=v;continue e}if(t[N].test(L)){if(!0===g&&!1!==z&&""!==s&&!1!==i&&j){for(var B=V.length,H=null,I=0;I<B;I++){var J=V[I];if(J.char!==v&&!1===J.isNew)break;if(J.char===v){H=I;break}}null!==H?(R+=L,V.splice(H,1)):N--}else R+=L;continue e}_=!0}!1===m&&(R+=h.substr(N,k));break}R+=D}if(m&&!1===j){for(var W=null,$=0;$<R.length;$++)h[$]===v&&(W=$);R=null!==W?R.substr(0,W+1):""}return{conformedValue:R,meta:{someCharsRejected:_}}}var s={__nextCharOptional__:!0},p={"#":/\d/,A:/[a-z]/i,N:/[a-z0-9]/i,"?":s,X:/./},v=function(e){return r=e.toString().replace(/.(\/)[gmiyus]{0,6}$/,(function(e){return e.replace("/","?/")})),t=r.lastIndexOf("/"),new RegExp(r.slice(1,t),r.slice(t+1));var r,t},d=function(e){return e instanceof RegExp?e:function(e){return new RegExp("/[".concat(function(e){return"[\\^$.|?*+()".indexOf(e)>-1?"\\".concat(e):e}(e),"]/"))}(e)};function h(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return e.map((function(e,t,n){var o=r[e]||e,i=n[t-1],a=r[i]||i;return o===s?null:a===s?v(d(o)):o})).filter(Boolean)}function y(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return h(e.split(""),r)}var g=function(e,r){var t=document.createEvent("HTMLEvents");t.initEvent(r,!0,!0),e.dispatchEvent(t)},m=function(e){return e instanceof HTMLInputElement?e:e.querySelector("input")||e},b="undefined"!=typeof window&&window.navigator.userAgent.toLowerCase(),O=b&&b.indexOf("edge/")>0,k=b&&b.indexOf("android")>0,w=b&&/chrome\/\d+/.test(b)&&!O;var x=function(){var e=new Map,r={previousValue:"",mask:[]};function t(t){return e.get(t)||o({},r)}return{partiallyUpdate:function(r,n){e.set(r,o(o({},t(r)),n))},remove:function(r){e.delete(r)},get:t}}();function j(e){var r=g.bind(null,e,"input");k&&w?setTimeout(r,0):r()}function E(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e.value,n=x.get(e),o=n.previousValue,i=n.mask,a=t!==o,u=t.length>o.length,c=t&&a&&u;if(r||c){var f=l(t,i,{guide:!1}),s=f.conformedValue;e.value=s,j(e)}x.partiallyUpdate(e,{previousValue:t})}function P(e,r,t){var n=null;n=Array.isArray(r)?function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,t=e.map((function(e){return e instanceof RegExp?e:"string"==typeof e?e.split(""):null})).filter(Boolean).reduce((function(e,r){return e.concat(r)}),[]);return h(t,r)}(r,t):"function"==typeof r?r:y(r,t),x.partiallyUpdate(e,{mask:n})}function A(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return null===e||Array.isArray(e)||"object"!==r(e)?n:Object.keys(e).reduce((function(r,n){var i=e[n];return null===i||i instanceof RegExp?o(o({},r),{},t({},n,i)):r}),n)}function T(e){return(Array.isArray(e)?e:[e]).filter((function(e){return"string"==typeof e||e instanceof RegExp})).toString()}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=A(e&&e.placeholders);return{bind:function(e,t){var n=t.value;P(e=m(e),n,r),E(e)},componentUpdated:function(e,t){var n=t.value,o=t.oldValue;e=m(e);var i="function"==typeof n||T(o)!==T(n);i&&P(e,n,r),E(e,i)},unbind:function(e){e=m(e),x.remove(e)}}}var M=V(),S=function(e,r){return l(e,y(r),{guide:!1}).conformedValue},C=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.directive("mask",V(r)),e.filter("VMask",S)};e.VueMaskDirective=M,e.VueMaskFilter=S,e.VueMaskPlugin=C,e.default=C,Object.defineProperty(e,"__esModule",{value:!0})}));

